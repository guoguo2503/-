<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ˜Ÿé™…è¿åŠ¿ | Cosmic Horoscope</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans SC', sans-serif;
            background: #0a0a1a;
            min-height: 100vh;
            overflow-x: hidden;
            color: #e0e0ff;
        }

        /* æ˜Ÿç©ºèƒŒæ™¯åŠ¨ç”» */
        .stars-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: linear-gradient(135deg, #0a0a1a 0%, #1a0b2e 50%, #16213e 100%);
        }

        .stars {
            position: absolute;
            width: 100%;
            height: 100%;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        .shooting-star {
            position: absolute;
            width: 100px;
            height: 2px;
            background: linear-gradient(90deg, transparent, #fff, #00d4ff, transparent);
            animation: shoot 3s linear infinite;
            opacity: 0;
        }

        @keyframes shoot {
            0% { transform: translateX(-100px) rotate(-45deg); opacity: 1; }
            100% { transform: translateX(100vw) rotate(-45deg); opacity: 0; }
        }

        /* æå…‰æ•ˆæœ */
        .aurora {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(ellipse at 20% 20%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(ellipse at 50% 50%, rgba(0, 212, 255, 0.1) 0%, transparent 70%);
            z-index: -1;
            animation: aurora-flow 20s ease-in-out infinite;
        }

        @keyframes aurora-flow {
            0%, 100% { transform: rotate(0deg) scale(1); }
            50% { transform: rotate(180deg) scale(1.1); }
        }

        /* ç»ç’ƒæ‹Ÿæ€å¡ç‰‡ */
        .glass-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 
                0 8px 32px 0 rgba(31, 38, 135, 0.37),
                inset 0 0 20px rgba(255, 255, 255, 0.05);
            border-radius: 24px;
        }

        .glass-card:hover {
            border-color: rgba(255, 255, 255, 0.2);
            box-shadow: 
                0 8px 32px 0 rgba(31, 38, 135, 0.5),
                inset 0 0 30px rgba(255, 255, 255, 0.1);
        }

        /* éœ“è™¹å…‰æ•ˆ */
        .neon-text {
            text-shadow: 
                0 0 10px rgba(0, 212, 255, 0.8),
                0 0 20px rgba(0, 212, 255, 0.5),
                0 0 30px rgba(0, 212, 255, 0.3);
        }

        .neon-border {
            box-shadow: 
                0 0 5px #00d4ff,
                0 0 10px #00d4ff,
                inset 0 0 5px rgba(0, 212, 255, 0.2);
        }

        /* è¾“å…¥æ¡†æ ·å¼ */
        .cosmic-input {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(0, 212, 255, 0.3);
            color: #e0e0ff;
            transition: all 0.3s ease;
        }

        .cosmic-input:focus {
            outline: none;
            border-color: #00d4ff;
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.3);
        }

        /* æŒ‰é’®æ ·å¼ */
        .cosmic-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .cosmic-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: left 0.5s;
        }

        .cosmic-btn:hover::before {
            left: 100%;
        }

        .cosmic-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.5);
        }

        /* æ˜Ÿåº§å›¾æ ‡åŠ¨ç”» */
        .zodiac-icon {
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        /* è¿åŠ¿æ¡åŠ¨ç”» */
        .fortune-bar {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            position: relative;
        }

        .fortune-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 1.5s ease-out;
            position: relative;
            overflow: hidden;
        }

        .fortune-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* é…å¯¹å¡ç‰‡ */
        .match-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .match-card:hover {
            transform: scale(1.05);
        }

        .match-high { border-color: rgba(255, 107, 107, 0.5); background: rgba(255, 107, 107, 0.1); }
        .match-medium { border-color: rgba(255, 193, 7, 0.5); background: rgba(255, 193, 7, 0.1); }
        .match-low { border-color: rgba(108, 117, 125, 0.5); background: rgba(108, 117, 125, 0.1); }

        /* ç²’å­æ•ˆæœ */
        .particle {
            position: absolute;
            pointer-events: none;
            background: radial-gradient(circle, #00d4ff 0%, transparent 70%);
            border-radius: 50%;
            animation: particle-fade 1s ease-out forwards;
        }

        @keyframes particle-fade {
            0% { transform: scale(0); opacity: 1; }
            100% { transform: scale(4); opacity: 0; }
        }

        /* å“åº”å¼è°ƒæ•´ */
        @media (max-width: 640px) {
            .glass-card {
                margin: 1rem;
                padding: 1.5rem;
            }
        }

        /* æ»šåŠ¨æ¡ç¾åŒ– */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #0a0a1a;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #667eea, #764ba2);
            border-radius: 4px;
        }

        /* åŠ è½½åŠ¨ç”» */
        .loading-spinner {
            border: 3px solid rgba(255,255,255,0.1);
            border-top-color: #00d4ff;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* åˆ†äº«æŒ‰é’® */
        .share-btn {
            transition: all 0.3s ease;
        }

        .share-btn:hover {
            transform: scale(1.1) rotate(5deg);
        }

        /* æ–‡å­—æ¸å˜ */
        .text-gradient {
            background: linear-gradient(135deg, #00d4ff 0%, #ff00ff 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
    </style>
</head>
<body>

    <!-- èƒŒæ™¯æ•ˆæœ -->
    <div class="stars-container">
        <div class="stars" id="stars"></div>
        <div class="aurora"></div>
    </div>

    <!-- ä¸»å®¹å™¨ -->
    <div class="min-h-screen flex flex-col items-center justify-center p-4 relative z-10">
        
        <!-- æ ‡é¢˜åŒºåŸŸ -->
        <header class="text-center mb-8 animate-fade-in">
            <h1 class="text-5xl md:text-7xl font-black mb-4 font-['Orbitron'] tracking-wider text-gradient neon-text">
                COSMIC
            </h1>
            <p class="text-xl md:text-2xl text-gray-300 tracking-[0.3em] uppercase">æ˜Ÿé™…è¿åŠ¿æŒ‡å—</p>
            <div class="mt-4 flex justify-center space-x-2">
                <span class="w-2 h-2 bg-cyan-400 rounded-full animate-pulse"></span>
                <span class="w-2 h-2 bg-purple-400 rounded-full animate-pulse delay-75"></span>
                <span class="w-2 h-2 bg-pink-400 rounded-full animate-pulse delay-150"></span>
            </div>
        </header>

        <!-- è¾“å…¥åŒºåŸŸ -->
        <div id="input-section" class="glass-card p-8 md:p-12 w-full max-w-md mx-auto transform transition-all duration-500">
            <div class="text-center mb-8">
                <div class="text-6xl mb-4 zodiac-icon">ğŸ”®</div>
                <h2 class="text-2xl font-bold mb-2 text-white">æ¢ç´¢ä½ çš„æ˜Ÿè±¡å¯†ç </h2>
                <p class="text-gray-400 text-sm">è¾“å…¥å‡ºç”Ÿæ—¥æœŸï¼Œè§£é”å®‡å®™ä¸ºä½ å‡†å¤‡çš„ä¸“å±è¿åŠ¿</p>
            </div>

            <div class="space-y-6">
                <div class="relative">
                    <label class="block text-sm font-medium text-cyan-300 mb-2 tracking-wider">å‡ºç”Ÿæ—¥æœŸ</label>
                    <input 
                        type="date" 
                        id="birthDate" 
                        class="cosmic-input w-full px-4 py-3 rounded-xl text-lg"
                        max="2026-12-31"
                    >
                </div>

                <button 
                    onclick="calculateHoroscope()" 
                    class="cosmic-btn w-full py-4 rounded-xl text-white font-bold text-lg tracking-wider uppercase"
                >
                    <span class="relative z-10 flex items-center justify-center gap-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path></svg>
                        è§£è¯»æ˜Ÿè±¡
                    </span>
                </button>
            </div>

            <div class="mt-6 text-center">
                <p class="text-xs text-gray-500">âœ¨ åŸºäºå æ˜Ÿå­¦åŸç†ç”Ÿæˆï¼Œä»…ä¾›å¨±ä¹å‚è€ƒ</p>
            </div>
        </div>

        <!-- ç»“æœåŒºåŸŸï¼ˆåˆå§‹éšè—ï¼‰ -->
        <div id="result-section" class="hidden w-full max-w-4xl mx-auto">
            
            <!-- æ˜Ÿåº§åŸºæœ¬ä¿¡æ¯å¡ç‰‡ -->
            <div class="glass-card p-6 md:p-10 mb-6 relative overflow-hidden">
                <div class="absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-cyan-500/20 to-purple-500/20 rounded-full blur-3xl -mr-32 -mt-32"></div>
                
                <div class="flex flex-col md:flex-row items-center gap-8 relative z-10">
                    <div class="text-center md:text-left flex-1">
                        <div class="inline-block px-4 py-1 rounded-full bg-gradient-to-r from-cyan-500/20 to-purple-500/20 border border-cyan-500/30 text-cyan-300 text-sm mb-4">
                            <span id="dateRange"></span>
                        </div>
                        <h2 id="zodiacName" class="text-4xl md:text-6xl font-bold mb-2 text-white font-['Orbitron']"></h2>
                        <p id="zodiacElement" class="text-xl text-purple-300 mb-4"></p>
                        <p id="zodiacDescription" class="text-gray-300 leading-relaxed max-w-2xl"></p>
                    </div>
                    <div class="text-8xl md:text-9xl zodiac-icon filter drop-shadow-[0_0_30px_rgba(0,212,255,0.5)]" id="zodiacIcon"></div>
                </div>
            </div>

            <!-- ä»Šæ—¥è¿åŠ¿ç½‘æ ¼ -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                <!-- ç»¼åˆè¿åŠ¿ -->
                <div class="glass-card p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-bold text-white flex items-center gap-2">
                            <span class="text-2xl">ğŸ¯</span> ç»¼åˆè¿åŠ¿
                        </h3>
                        <span id="overallScore" class="text-2xl font-bold text-cyan-400"></span>
                    </div>
                    <div class="fortune-bar mb-3">
                        <div id="overallBar" class="fortune-fill bg-gradient-to-r from-cyan-400 to-blue-500" style="width: 0%"></div>
                    </div>
                    <p id="overallText" class="text-sm text-gray-400"></p>
                </div>

                <!-- çˆ±æƒ…è¿åŠ¿ -->
                <div class="glass-card p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-bold text-white flex items-center gap-2">
                            <span class="text-2xl">ğŸ’•</span> çˆ±æƒ…è¿åŠ¿
                        </h3>
                        <span id="loveScore" class="text-2xl font-bold text-pink-400"></span>
                    </div>
                    <div class="fortune-bar mb-3">
                        <div id="loveBar" class="fortune-fill bg-gradient-to-r from-pink-400 to-rose-500" style="width: 0%"></div>
                    </div>
                    <p id="loveText" class="text-sm text-gray-400"></p>
                </div>

                <!-- äº‹ä¸šè´¢è¿ -->
                <div class="glass-card p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-bold text-white flex items-center gap-2">
                            <span class="text-2xl">ğŸ’¼</span> äº‹ä¸šè´¢è¿
                        </h3>
                        <span id="careerScore" class="text-2xl font-bold text-yellow-400"></span>
                    </div>
                    <div class="fortune-bar mb-3">
                        <div id="careerBar" class="fortune-fill bg-gradient-to-r from-yellow-400 to-orange-500" style="width: 0%"></div>
                    </div>
                    <p id="careerText" class="text-sm text-gray-400"></p>
                </div>
            </div>

            <!-- å¹¸è¿ä¿¡æ¯ä¸å»ºè®® -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                <div class="glass-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 flex items-center gap-2">
                        <span class="text-2xl">ğŸ€</span> ä»Šæ—¥å¹¸è¿
                    </h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center p-3 rounded-lg bg-white/5">
                            <span class="text-gray-400">å¹¸è¿æ•°å­—</span>
                            <span id="luckyNumber" class="text-xl font-bold text-cyan-400"></span>
                        </div>
                        <div class="flex justify-between items-center p-3 rounded-lg bg-white/5">
                            <span class="text-gray-400">å¹¸è¿é¢œè‰²</span>
                            <div class="flex items-center gap-2">
                                <span id="luckyColor" class="text-lg font-bold"></span>
                                <div id="colorBox" class="w-6 h-6 rounded-full border border-white/30"></div>
                            </div>
                        </div>
                        <div class="flex justify-between items-center p-3 rounded-lg bg-white/5">
                            <span class="text-gray-400">é€Ÿé…æ˜Ÿåº§</span>
                            <span id="matchSign" class="text-lg font-bold text-purple-400"></span>
                        </div>
                    </div>
                </div>

                <div class="glass-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 flex items-center gap-2">
                        <span class="text-2xl">ğŸ’¡</span> å®‡å®™å»ºè®®
                    </h3>
                    <ul id="adviceList" class="space-y-2 text-gray-300 text-sm">
                        <!-- åŠ¨æ€ç”Ÿæˆ -->
                    </ul>
                </div>
            </div>

            <!-- æ˜Ÿåº§é…å¯¹ -->
            <div class="glass-card p-6 mb-6">
                <h3 class="text-lg font-bold text-white mb-6 flex items-center gap-2">
                    <span class="text-2xl">ğŸ”®</span> æ˜Ÿåº§é…å¯¹æŒ‡æ•°
                </h3>
                <div id="compatibilityGrid" class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <!-- åŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>

            <!-- æ“ä½œæŒ‰é’® -->
            <div class="flex flex-col sm:flex-row gap-4 justify-center mb-12">
                <button onclick="resetForm()" class="px-8 py-3 rounded-xl border border-white/20 text-white hover:bg-white/10 transition-all flex items-center justify-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>
                    é‡æ–°æµ‹ç®—
                </button>
                <button onclick="shareResult()" class="cosmic-btn px-8 py-3 rounded-xl text-white font-bold flex items-center justify-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"></path></svg>
                    åˆ†äº«è¿åŠ¿
                </button>
            </div>

        </div>

        <!-- é¡µè„š -->
        <footer class="text-center text-gray-500 text-sm pb-8">
            <p>Â© 2026 Cosmic Horoscope | æ˜Ÿé™…è¿åŠ¿æŒ‡å—</p>
        </footer>

    </div>

    <!-- åˆ†äº«å¼¹çª— -->
    <div id="shareModal" class="fixed inset-0 bg-black/80 backdrop-blur-sm z-50 hidden flex items-center justify-center p-4">
        <div class="glass-card p-8 max-w-md w-full transform scale-95 opacity-0 transition-all duration-300" id="shareContent">
            <h3 class="text-2xl font-bold text-white mb-6 text-center">åˆ†äº«ä½ çš„è¿åŠ¿</h3>
            <div class="bg-gradient-to-br from-purple-900/50 to-blue-900/50 p-6 rounded-xl mb-6 border border-white/10">
                <p id="shareText" class="text-gray-200 text-center leading-relaxed"></p>
            </div>
            <div class="grid grid-cols-3 gap-4 mb-6">
                <button onclick="copyToClipboard()" class="share-btn p-4 rounded-xl bg-white/5 hover:bg-white/10 border border-white/10 flex flex-col items-center gap-2">
                    <svg class="w-6 h-6 text-cyan-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
                    <span class="text-xs text-gray-400">å¤åˆ¶</span>
                </button>
                <button onclick="shareToWeibo()" class="share-btn p-4 rounded-xl bg-white/5 hover:bg-white/10 border border-white/10 flex flex-col items-center gap-2">
                    <svg class="w-6 h-6 text-red-400" fill="currentColor" viewBox="0 0 24 24"><path d="M10.098 20.323c-3.977.391-7.414-1.406-7.672-4.02-.259-2.609 2.759-5.047 6.74-5.441 3.979-.394 7.413 1.404 7.671 4.018.259 2.6-2.759 5.049-6.739 5.443zM9.05 17.219c-.384.616-1.208.884-1.829.602-.612-.279-.793-.991-.406-1.593.379-.595 1.176-.861 1.793-.601.622.263.82.972.442 1.592zm1.27-1.627c-.141.237-.449.353-.689.253-.236-.09-.313-.361-.177-.586.138-.227.436-.346.672-.24.239.09.315.36.194.573zm.176-2.719c-1.893-.493-4.033.45-4.857 2.118-.836 1.704-.026 3.591 1.886 4.21 1.983.64 4.318-.341 5.132-2.179.8-1.793-.201-3.642-2.161-4.149zm7.563-1.224c-.346-.105-.579-.18-.405-.649.386-1.02.425-1.899.003-2.525-.793-1.17-2.966-1.109-5.419-.031 0 0-.777.34-.578-.274.381-1.205.324-2.213-.27-2.8-1.348-1.33-4.929.045-8.002 3.073C1.353 10.476 0 12.555 0 14.369c0 3.475 4.453 5.591 8.809 5.591 5.709 0 9.508-3.32 9.508-5.958 0-1.597-1.344-2.5-2.258-2.853zm.485-7.652c-.831-.865-2.123-1.169-3.288-.764-.447.152-.687.635-.534 1.082.152.447.634.687 1.082.535.584-.198 1.217-.049 1.639.381.421.43.558 1.067.351 1.646-.152.447.088.93.535 1.082.447.152.93-.088 1.082-.535.415-1.224.093-2.59-.867-3.427z"/></svg>
                    <span class="text-xs text-gray-400">å¾®åš</span>
                </button>
                <button onclick="closeShareModal()" class="share-btn p-4 rounded-xl bg-white/5 hover:bg-white/10 border border-white/10 flex flex-col items-center gap-2">
                    <svg class="w-6 h-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                    <span class="text-xs text-gray-400">å…³é—­</span>
                </button>
            </div>
            <div id="copyFeedback" class="text-center text-cyan-400 text-sm opacity-0 transition-opacity">å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼</div>
        </div>
    </div>

    <script>
        // æ˜Ÿåº§æ•°æ®
        const zodiacData = {
            'ç™½ç¾Šåº§': {
                icon: 'â™ˆ',
                dateRange: '3.21 - 4.19',
                element: 'ç«è±¡æ˜Ÿåº§',
                description: 'çƒ­æƒ…å¥”æ”¾çš„ç™½ç¾Šåº§ï¼Œå……æ»¡æ´»åŠ›ä¸å†’é™©ç²¾ç¥ã€‚ä½ å¤©ç”Ÿå…·æœ‰é¢†å¯¼æ‰èƒ½ï¼Œå‹‡å¾€ç›´å‰ï¼Œä¸ç•æŒ‘æˆ˜ã€‚ä»Šæ—¥æ˜Ÿè±¡æ˜¾ç¤ºï¼Œä½ çš„èƒ½é‡å°†è¾¾åˆ°é¡¶å³°ï¼Œé€‚åˆå¼€å¯æ–°çš„è®¡åˆ’ã€‚',
                colors: ['çº¢è‰²', 'æ©™è‰²'],
                colorCodes: ['#FF6B6B', '#FFA500']
            },
            'é‡‘ç‰›åº§': {
                icon: 'â™‰',
                dateRange: '4.20 - 5.20',
                element: 'åœŸè±¡æ˜Ÿåº§',
                description: 'ç¨³é‡åŠ¡å®çš„é‡‘ç‰›åº§ï¼Œæ‹¥æœ‰åšå®šçš„æ„å¿—å’Œå“è¶Šçš„å®¡ç¾ã€‚ä½ é‡è§†å®‰å…¨æ„Ÿï¼Œè¿½æ±‚é«˜å“è´¨ç”Ÿæ´»ã€‚ä»Šæ—¥é€‚åˆå¤„ç†è´¢åŠ¡äº‹å®œï¼Œç¨³å¥çš„æŠ•èµ„å°†å¸¦æ¥å›æŠ¥ã€‚',
                colors: ['ç»¿è‰²', 'ç²‰è‰²'],
                colorCodes: ['#4ECDC4', '#FFB6C1']
            },
            'åŒå­åº§': {
                icon: 'â™Š',
                dateRange: '5.21 - 6.21',
                element: 'é£è±¡æ˜Ÿåº§',
                description: 'æœºæ™ºçµæ´»çš„åŒå­åº§ï¼Œæ‹¥æœ‰æ•æ·çš„æ€ç»´å’Œå‡ºè‰²çš„æ²Ÿé€šèƒ½åŠ›ã€‚ä½ å¥½å¥‡å¿ƒå¼ºï¼Œå–„äºé€‚åº”å˜åŒ–ã€‚ä»Šæ—¥ç¤¾äº¤è¿åŠ¿æä½³ï¼Œé‡è¦ä¿¡æ¯å¯èƒ½é€šè¿‡äº¤æµè·å¾—ã€‚',
                colors: ['é»„è‰²', 'è“è‰²'],
                colorCodes: ['#FFD93D', '#6BCB77']
            },
            'å·¨èŸ¹åº§': {
                icon: 'â™‹',
                dateRange: '6.22 - 7.22',
                element: 'æ°´è±¡æ˜Ÿåº§',
                description: 'æ¸©æŸ”ç»†è…»çš„å·¨èŸ¹åº§ï¼Œå¯Œæœ‰åŒæƒ…å¿ƒå’Œç›´è§‰åŠ›ã€‚ä½ é‡è§†å®¶åº­ï¼Œæƒ…æ„Ÿä¸°å¯Œã€‚ä»Šæ—¥é€‚åˆä¸å®¶äººå…±åº¦æ—¶å…‰ï¼Œå®¶å±…ç¯å¢ƒçš„æ”¹å–„å°†æå‡ä½ çš„å¿ƒæƒ…ã€‚',
                colors: ['é“¶è‰²', 'ç™½è‰²'],
                colorCodes: ['#C0C0C0', '#FFFFFF']
            },
            'ç‹®å­åº§': {
                icon: 'â™Œ',
                dateRange: '7.23 - 8.22',
                element: 'ç«è±¡æ˜Ÿåº§',
                description: 'è‡ªä¿¡æ…·æ…¨çš„ç‹®å­åº§ï¼Œå¤©ç”Ÿå…·æœ‰ç‹è€…é£èŒƒã€‚ä½ åˆ›é€ åŠ›å¼ºï¼Œå–œæ¬¢æˆä¸ºç„¦ç‚¹ã€‚ä»Šæ—¥ä½ çš„é­…åŠ›å€¼çˆ†è¡¨ï¼Œé€‚åˆå±•ç¤ºæ‰åï¼Œå¯èƒ½è·å¾—æ„å¤–èµèµã€‚',
                colors: ['é‡‘è‰²', 'æ©™è‰²'],
                colorCodes: ['#FFD700', '#FF8C00']
            },
            'å¤„å¥³åº§': {
                icon: 'â™',
                dateRange: '8.23 - 9.22',
                element: 'åœŸè±¡æ˜Ÿåº§',
                description: 'å®Œç¾ä¸»ä¹‰çš„å¤„å¥³åº§ï¼Œæ³¨é‡ç»†èŠ‚ä¸”åˆ†æèƒ½åŠ›å¼ºã€‚ä½ åŠ¡å®å¯é ï¼Œè¿½æ±‚ç²¾ç›Šæ±‚ç²¾ã€‚ä»Šæ—¥é€‚åˆæ•´ç†è§„åˆ’ï¼Œå·¥ä½œæ•ˆç‡å°†è¾¾åˆ°æ–°é«˜ã€‚',
                colors: ['æ£•è‰²', 'ç±³è‰²'],
                colorCodes: ['#8B4513', '#F5F5DC']
            },
            'å¤©ç§¤åº§': {
                icon: 'â™',
                dateRange: '9.23 - 10.23',
                element: 'é£è±¡æ˜Ÿåº§',
                description: 'ä¼˜é›…å’Œè°çš„å¤©ç§¤åº§ï¼Œè¿½æ±‚å¹³è¡¡ä¸ç¾æ„Ÿã€‚ä½ å–„äºåè°ƒï¼Œç¤¾äº¤æ‰‹è…•é«˜è¶…ã€‚ä»Šæ—¥äººé™…å…³ç³»è¿åŠ¿ä½³ï¼Œåˆä½œäº‹é¡¹å°†è¿›å±•é¡ºåˆ©ã€‚',
                colors: ['ç²‰è‰²', 'è“è‰²'],
                colorCodes: ['#FFC0CB', '#87CEEB']
            },
            'å¤©èåº§': {
                icon: 'â™',
                dateRange: '10.24 - 11.22',
                element: 'æ°´è±¡æ˜Ÿåº§',
                description: 'ç¥ç§˜æ·±æ²‰çš„å¤©èåº§ï¼Œæ‹¥æœ‰å¼ºçƒˆçš„ç›´è§‰å’Œæ´å¯ŸåŠ›ã€‚ä½ æ„å¿—åšå®šï¼Œæƒ…æ„Ÿæ·±åˆ»ã€‚ä»Šæ—¥ç›´è§‰æ•é”ï¼Œç›¸ä¿¡ä½ çš„ç¬¬ä¸€æ„Ÿè§‰ï¼Œå®ƒå°†æŒ‡å¼•æ­£ç¡®æ–¹å‘ã€‚',
                colors: ['æ·±çº¢', 'é»‘è‰²'],
                colorCodes: ['#8B0000', '#000000']
            },
            'å°„æ‰‹åº§': {
                icon: 'â™',
                dateRange: '11.23 - 12.21',
                element: 'ç«è±¡æ˜Ÿåº§',
                description: 'è‡ªç”±ä¹è§‚çš„å°„æ‰‹åº§ï¼Œçƒ­çˆ±å†’é™©å’Œæ¢ç´¢ã€‚ä½ è¯šå®ç›´ç‡ï¼Œå……æ»¡å“²å­¦æ€ç»´ã€‚ä»Šæ—¥é€‚åˆå­¦ä¹ æ–°çŸ¥è¯†æˆ–è§„åˆ’æ—…è¡Œï¼Œå¼€é˜”è§†é‡å°†å¸¦æ¥å¥½è¿ã€‚',
                colors: ['ç´«è‰²', 'è“è‰²'],
                colorCodes: ['#9B59B6', '#3498DB']
            },
            'æ‘©ç¾¯åº§': {
                icon: 'â™‘',
                dateRange: '12.22 - 1.19',
                element: 'åœŸè±¡æ˜Ÿåº§',
                description: 'åšéŸ§è‡ªå¾‹çš„æ‘©ç¾¯åº§ï¼Œå…·æœ‰å¼ºçƒˆçš„è´£ä»»æ„Ÿå’Œé‡å¿ƒã€‚ä½ è„šè¸å®åœ°ï¼Œè¿½æ±‚é•¿æœŸç›®æ ‡ã€‚ä»Šæ—¥äº‹ä¸šè¿åŠ¿å¼ºåŠ²ï¼ŒåŠªåŠ›å°†è¢«ä¸Šçº§çœ‹è§ã€‚',
                colors: ['é»‘è‰²', 'æ·±ç°'],
                colorCodes: ['#000000', '#696969']
            },
            'æ°´ç“¶åº§': {
                icon: 'â™’',
                dateRange: '1.20 - 2.18',
                element: 'é£è±¡æ˜Ÿåº§',
                description: 'ç‹¬ç«‹åˆ›æ–°çš„æ°´ç“¶åº§ï¼Œæ‹¥æœ‰å‰ç»æ€ç»´å’Œäººæ–‡ç²¾ç¥ã€‚ä½ ç‰¹ç«‹ç‹¬è¡Œï¼Œå–„äºé©æ–°ã€‚ä»Šæ—¥åˆ›æ„çµæ„Ÿæ¶Œç°ï¼Œæ‰“ç ´å¸¸è§„å°†å¸¦æ¥çªç ´ã€‚',
                colors: ['ç”µå…‰è“', 'é“¶è‰²'],
                colorCodes: ['#00FFFF', '#C0C0C0']
            },
            'åŒé±¼åº§': {
                icon: 'â™“',
                dateRange: '2.19 - 3.20',
                element: 'æ°´è±¡æ˜Ÿåº§',
                description: 'æµªæ¼«æ¢¦å¹»çš„åŒé±¼åº§ï¼Œå¯Œæœ‰è‰ºæœ¯å¤©èµ‹å’ŒåŒæƒ…å¿ƒã€‚ä½ ç›´è§‰æ•é”ï¼Œå–„äºç†è§£ä»–äººã€‚ä»Šæ—¥è‰ºæœ¯æ„ŸçŸ¥åŠ›å¢å¼ºï¼Œé€‚åˆåˆ›ä½œæˆ–æ¬£èµè‰ºæœ¯ä½œå“ã€‚',
                colors: ['æµ·è“', 'ç´«è‰²'],
                colorCodes: ['#006994', '#9B59B6']
            }
        };

        // é…å¯¹æ•°æ®
        const compatibilityData = {
            'ç™½ç¾Šåº§': { 'ç‹®å­åº§': 98, 'å°„æ‰‹åº§': 95, 'åŒå­åº§': 90, 'æ°´ç“¶åº§': 85, 'å¤©ç§¤åº§': 80, 'ç™½ç¾Šåº§': 75, 'åŒé±¼åº§': 60, 'é‡‘ç‰›åº§': 50, 'å¤„å¥³åº§': 45, 'æ‘©ç¾¯åº§': 40, 'å·¨èŸ¹åº§': 35, 'å¤©èåº§': 30 },
            'é‡‘ç‰›åº§': { 'å¤„å¥³åº§': 98, 'æ‘©ç¾¯åº§': 95, 'å·¨èŸ¹åº§': 90, 'åŒé±¼åº§': 88, 'å¤©èåº§': 85, 'é‡‘ç‰›åº§': 80, 'ç‹®å­åº§': 50, 'æ°´ç“¶åº§': 45, 'å¤©ç§¤åº§': 40, 'å°„æ‰‹åº§': 35, 'ç™½ç¾Šåº§': 30, 'åŒå­åº§': 25 },
            'åŒå­åº§': { 'å¤©ç§¤åº§': 98, 'æ°´ç“¶åº§': 95, 'ç™½ç¾Šåº§': 90, 'ç‹®å­åº§': 88, 'å°„æ‰‹åº§': 85, 'åŒå­åº§': 80, 'å¤„å¥³åº§': 50, 'åŒé±¼åº§': 45, 'æ‘©ç¾¯åº§': 40, 'å·¨èŸ¹åº§': 35, 'å¤©èåº§': 30, 'é‡‘ç‰›åº§': 25 },
            'å·¨èŸ¹åº§': { 'å¤©èåº§': 98, 'åŒé±¼åº§': 95, 'é‡‘ç‰›åº§': 90, 'å¤„å¥³åº§': 88, 'æ‘©ç¾¯åº§': 85, 'å·¨èŸ¹åº§': 80, 'ç™½ç¾Šåº§': 50, 'å¤©ç§¤åº§': 45, 'å°„æ‰‹åº§': 40, 'æ°´ç“¶åº§': 35, 'ç‹®å­åº§': 30, 'åŒå­åº§': 25 },
            'ç‹®å­åº§': { 'ç™½ç¾Šåº§': 98, 'å°„æ‰‹åº§': 95, 'åŒå­åº§': 90, 'å¤©ç§¤åº§': 88, 'æ°´ç“¶åº§': 85, 'ç‹®å­åº§': 80, 'é‡‘ç‰›åº§': 50, 'å¤©èåº§': 45, 'æ‘©ç¾¯åº§': 40, 'åŒé±¼åº§': 35, 'å¤„å¥³åº§': 30, 'å·¨èŸ¹åº§': 25 },
            'å¤„å¥³åº§': { 'é‡‘ç‰›åº§': 98, 'æ‘©ç¾¯åº§': 95, 'å·¨èŸ¹åº§': 90, 'å¤©èåº§': 88, 'åŒé±¼åº§': 85, 'å¤„å¥³åº§': 80, 'ç™½ç¾Šåº§': 50, 'å¤©ç§¤åº§': 45, 'å°„æ‰‹åº§': 40, 'æ°´ç“¶åº§': 35, 'åŒå­åº§': 30, 'ç‹®å­åº§': 25 },
            'å¤©ç§¤åº§': { 'åŒå­åº§': 98, 'æ°´ç“¶åº§': 95, 'ç‹®å­åº§': 90, 'å°„æ‰‹åº§': 88, 'ç™½ç¾Šåº§': 85, 'å¤©ç§¤åº§': 80, 'å·¨èŸ¹åº§': 50, 'æ‘©ç¾¯åº§': 45, 'é‡‘ç‰›åº§': 40, 'å¤©èåº§': 35, 'å¤„å¥³åº§': 30, 'åŒé±¼åº§': 25 },
            'å¤©èåº§': { 'å·¨èŸ¹åº§': 98, 'åŒé±¼åº§': 95, 'å¤„å¥³åº§': 90, 'æ‘©ç¾¯åº§': 88, 'é‡‘ç‰›åº§': 85, 'å¤©èåº§': 80, 'ç‹®å­åº§': 50, 'æ°´ç“¶åº§': 45, 'ç™½ç¾Šåº§': 40, 'å¤©ç§¤åº§': 35, 'å°„æ‰‹åº§': 30, 'åŒå­åº§': 25 },
            'å°„æ‰‹åº§': { 'ç™½ç¾Šåº§': 98, 'ç‹®å­åº§': 95, 'å¤©ç§¤åº§': 90, 'æ°´ç“¶åº§': 88, 'åŒå­åº§': 85, 'å°„æ‰‹åº§': 80, 'å¤„å¥³åº§': 50, 'åŒé±¼åº§': 45, 'å·¨èŸ¹åº§': 40, 'é‡‘ç‰›åº§': 35, 'æ‘©ç¾¯åº§': 30, 'å¤©èåº§': 25 },
            'æ‘©ç¾¯åº§': { 'é‡‘ç‰›åº§': 98, 'å¤„å¥³åº§': 95, 'å¤©èåº§': 90, 'åŒé±¼åº§': 88, 'å·¨èŸ¹åº§': 85, 'æ‘©ç¾¯åº§': 80, 'ç™½ç¾Šåº§': 50, 'å¤©ç§¤åº§': 45, 'ç‹®å­åº§': 40, 'åŒå­åº§': 35, 'å°„æ‰‹åº§': 30, 'æ°´ç“¶åº§': 25 },
            'æ°´ç“¶åº§': { 'åŒå­åº§': 98, 'å¤©ç§¤åº§': 95, 'å°„æ‰‹åº§': 90, 'ç™½ç¾Šåº§': 88, 'ç‹®å­åº§': 85, 'æ°´ç“¶åº§': 80, 'é‡‘ç‰›åº§': 50, 'å¤©èåº§': 45, 'å·¨èŸ¹åº§': 40, 'æ‘©ç¾¯åº§': 35, 'å¤„å¥³åº§': 30, 'åŒé±¼åº§': 25 },
            'åŒé±¼åº§': { 'å¤©èåº§': 98, 'å·¨èŸ¹åº§': 95, 'é‡‘ç‰›åº§': 90, 'æ‘©ç¾¯åº§': 88, 'å¤„å¥³åº§': 85, 'åŒé±¼åº§': 80, 'åŒå­åº§': 50, 'å°„æ‰‹åº§': 45, 'ç™½ç¾Šåº§': 40, 'å¤©ç§¤åº§': 35, 'æ°´ç“¶åº§': 30, 'ç‹®å­åº§': 25 }
        };

        // è¿åŠ¿å»ºè®®æ¨¡æ¿
        const adviceTemplates = {
            'high': ['æŠŠæ¡ä»Šæ—¥çš„å¥½è¿åŠ¿ï¼Œä¸»åŠ¨å‡ºå‡»', 'é€‚åˆè¿›è¡Œé‡è¦å†³ç­–å’Œè°ˆåˆ¤', 'å±•ç°ä½ çš„é¢†å¯¼æ‰èƒ½', 'æŠ•èµ„ç†è´¢å¯è·å¾—ä¸é”™æ”¶ç›Š', 'å‘å¿ƒä»ªå¯¹è±¡è¡¨ç™½æˆåŠŸç‡æé«˜'],
            'medium': ['ä¿æŒå¹³å¸¸å¿ƒï¼Œç¨³æ‰ç¨³æ‰“', 'æ³¨æ„ç»†èŠ‚ï¼Œé¿å…ç²—å¿ƒå¤§æ„', 'å¤šå¬å–ä»–äººå»ºè®®', 'é€‚åˆå­¦ä¹ æ–°æŠ€èƒ½', 'ä¿æŒç°æœ‰èŠ‚å¥ï¼Œä¸å®œå†’è¿›'],
            'low': ['ä»Šæ—¥å®œé™ä¸å®œåŠ¨', 'é¿å…å†²åŠ¨å†³ç­–', 'å¤šä¼‘æ¯ï¼Œè°ƒæ•´çŠ¶æ€', 'è°¨æ…å¤„ç†è´¢åŠ¡é—®é¢˜', 'ä¸ä¼´ä¾£å¤šæ²Ÿé€šï¼Œé¿å…è¯¯ä¼š']
        };

        let currentZodiac = '';
        let currentFortune = {};

        // åˆå§‹åŒ–æ˜Ÿç©ºèƒŒæ™¯
        function initStars() {
            const starsContainer = document.getElementById('stars');
            const count = 100;
            
            for (let i = 0; i < count; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.width = Math.random() * 3 + 'px';
                star.style.height = star.style.width;
                star.style.animationDelay = Math.random() * 3 + 's';
                starsContainer.appendChild(star);
            }

            // æ·»åŠ æµæ˜Ÿ
            setInterval(() => {
                const shootingStar = document.createElement('div');
                shootingStar.className = 'shooting-star';
                shootingStar.style.top = Math.random() * 50 + '%';
                shootingStar.style.left = Math.random() * 50 + '%';
                shootingStar.style.animationDuration = (Math.random() * 2 + 1) + 's';
                starsContainer.appendChild(shootingStar);
                
                setTimeout(() => shootingStar.remove(), 3000);
            }, 4000);
        }

        // è®¡ç®—æ˜Ÿåº§
        function getZodiacSign(date) {
            const month = date.getMonth() + 1;
            const day = date.getDate();
            
            if ((month === 3 && day >= 21) || (month === 4 && day <= 19)) return 'ç™½ç¾Šåº§';
            if ((month === 4 && day >= 20) || (month === 5 && day <= 20)) return 'é‡‘ç‰›åº§';
            if ((month === 5 && day >= 21) || (month === 6 && day <= 21)) return 'åŒå­åº§';
            if ((month === 6 && day >= 22) || (month === 7 && day <= 22)) return 'å·¨èŸ¹åº§';
            if ((month === 7 && day >= 23) || (month === 8 && day <= 22)) return 'ç‹®å­åº§';
            if ((month === 8 && day >= 23) || (month === 9 && day <= 22)) return 'å¤„å¥³åº§';
            if ((month === 9 && day >= 23) || (month === 10 && day <= 23)) return 'å¤©ç§¤åº§';
            if ((month === 10 && day >= 24) || (month === 11 && day <= 22)) return 'å¤©èåº§';
            if ((month === 11 && day >= 23) || (month === 12 && day <= 21)) return 'å°„æ‰‹åº§';
            if ((month === 12 && day >= 22) || (month === 1 && day <= 19)) return 'æ‘©ç¾¯åº§';
            if ((month === 1 && day >= 20) || (month === 2 && day <= 18)) return 'æ°´ç“¶åº§';
            return 'åŒé±¼åº§';
        }

        // ç”ŸæˆåŸºäºæ—¥æœŸçš„ä¼ªéšæœºæ•°ï¼ˆç¡®ä¿åŒä¸€å¤©ç»“æœä¸€è‡´ï¼‰
        function seededRandom(seed) {
            const x = Math.sin(seed) * 10000;
            return x - Math.floor(x);
        }

        // ç”Ÿæˆè¿åŠ¿
        function generateFortune(date, zodiac) {
            const seed = date.getFullYear() * 10000 + (date.getMonth() + 1) * 100 + date.getDate();
            const zodiacIndex = Object.keys(zodiacData).indexOf(zodiac);
            const finalSeed = seed + zodiacIndex * 1000;
            
            const overall = Math.floor(seededRandom(finalSeed) * 40) + 60; // 60-100
            const love = Math.floor(seededRandom(finalSeed + 1) * 40) + 60;
            const career = Math.floor(seededRandom(finalSeed + 2) * 40) + 60;
            
            return { overall, love, career };
        }

        // è®¡ç®—æ˜Ÿåº§
        function calculateHoroscope() {
            const dateInput = document.getElementById('birthDate').value;
            if (!dateInput) {
                alert('è¯·é€‰æ‹©ä½ çš„å‡ºç”Ÿæ—¥æœŸ');
                return;
            }

            const birthDate = new Date(dateInput);
            const zodiac = getZodiacSign(birthDate);
            const today = new Date();
            const fortune = generateFortune(today, zodiac);
            
            currentZodiac = zodiac;
            currentFortune = fortune;

            // éšè—è¾“å…¥åŒºåŸŸï¼Œæ˜¾ç¤ºç»“æœ
            document.getElementById('input-section').classList.add('hidden');
            const resultSection = document.getElementById('result-section');
            resultSection.classList.remove('hidden');
            
            // å¡«å……æ•°æ®
            const data = zodiacData[zodiac];
            document.getElementById('zodiacIcon').textContent = data.icon;
            document.getElementById('zodiacName').textContent = zodiac;
            document.getElementById('zodiacElement').textContent = data.element;
            document.getElementById('dateRange').textContent = data.dateRange;
            document.getElementById('zodiacDescription').textContent = data.description;

            // è¿åŠ¿åˆ†æ•°
            document.getElementById('overallScore').textContent = fortune.overall + '%';
            document.getElementById('loveScore').textContent = fortune.love + '%';
            document.getElementById('careerScore').textContent = fortune.career + '%';

            // è¿åŠ¿æ¡åŠ¨ç”»
            setTimeout(() => {
                document.getElementById('overallBar').style.width = fortune.overall + '%';
                document.getElementById('loveBar').style.width = fortune.love + '%';
                document.getElementById('careerBar').style.width = fortune.career + '%';
            }, 100);

            // è¿åŠ¿æ–‡å­—
            document.getElementById('overallText').textContent = getFortuneText(fortune.overall);
            document.getElementById('loveText').textContent = getLoveText(fortune.love);
            document.getElementById('careerText').textContent = getCareerText(fortune.career);

            // å¹¸è¿ä¿¡æ¯
            const luckyNum = Math.floor(seededRandom(today.getDate() * 100) * 99) + 1;
            document.getElementById('luckyNumber').textContent = luckyNum;
            
            const colorIndex = Math.floor(seededRandom(today.getDate()) * data.colors.length);
            document.getElementById('luckyColor').textContent = data.colors[colorIndex];
            document.getElementById('colorBox').style.backgroundColor = data.colorCodes[colorIndex];

            // é€Ÿé…æ˜Ÿåº§
            const matches = compatibilityData[zodiac];
            const bestMatch = Object.entries(matches).sort((a, b) => b[1] - a[1])[0];
            document.getElementById('matchSign').textContent = bestMatch[0] + ' ' + zodiacData[bestMatch[0]].icon;

            // å»ºè®®åˆ—è¡¨
            const adviceList = document.getElementById('adviceList');
            adviceList.innerHTML = '';
            const level = fortune.overall >= 80 ? 'high' : (fortune.overall >= 60 ? 'medium' : 'low');
            const shuffled = adviceTemplates[level].sort(() => 0.5 - Math.random()).slice(0, 3);
            shuffled.forEach(advice => {
                const li = document.createElement('li');
                li.className = 'flex items-start gap-2';
                li.innerHTML = `<span class="text-cyan-400 mt-1">â–¸</span><span>${advice}</span>`;
                adviceList.appendChild(li);
            });

            // é…å¯¹ç½‘æ ¼
            const grid = document.getElementById('compatibilityGrid');
            grid.innerHTML = '';
            Object.entries(matches).sort((a, b) => b[1] - a[1]).forEach(([sign, score]) => {
                const card = document.createElement('div');
                let matchClass = score >= 80 ? 'match-high' : (score >= 60 ? 'match-medium' : 'match-low');
                card.className = `glass-card p-4 match-card ${matchClass} text-center`;
                card.innerHTML = `
                    <div class="text-2xl mb-1">${zodiacData[sign].icon}</div>
                    <div class="text-sm font-bold text-white mb-1">${sign}</div>
                    <div class="text-lg font-bold ${score >= 80 ? 'text-red-400' : (score >= 60 ? 'text-yellow-400' : 'text-gray-400')}">${score}%</div>
                `;
                grid.appendChild(card);
            });

            // æ»šåŠ¨åˆ°ç»“æœåŒºåŸŸ
            resultSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        function getFortuneText(score) {
            if (score >= 90) return 'è¿åŠ¿çˆ†æ£šï¼ä»Šæ—¥æ˜¯è¡ŒåŠ¨çš„æœ€ä½³æ—¶æœº';
            if (score >= 80) return 'å‰æ˜Ÿé«˜ç…§ï¼Œé€‚åˆæ¨è¿›é‡è¦è®¡åˆ’';
            if (score >= 70) return 'è¿åŠ¿å¹³ç¨³ï¼Œä¿æŒç§¯æå¿ƒæ€';
            if (score >= 60) return 'ç•¥æœ‰æ³¢æŠ˜ï¼Œè°¨æ…è¡Œäº‹ä¸ºå®œ';
            return 'è¿åŠ¿ä½è¿·ï¼Œå®œé™è§‚å…¶å˜';
        }

        function getLoveText(score) {
            if (score >= 90) return 'æ¡ƒèŠ±è¿æ—ºï¼Œå•èº«è€…æœ‰æœ›é‚‚é€…è‰¯ç¼˜';
            if (score >= 80) return 'æ„Ÿæƒ…ç”œèœœï¼Œé€‚åˆçº¦ä¼šæˆ–è¡¨ç™½';
            if (score >= 70) return 'å…³ç³»ç¨³å®šï¼Œå¤šå…³å¿ƒä¼´ä¾£æ„Ÿå—';
            if (score >= 60) return 'éœ€è¦æ²Ÿé€šï¼Œé¿å…å°è¯¯ä¼šç§¯ç´¯';
            return 'æ„Ÿæƒ…ä½è°·ï¼Œç»™å½¼æ­¤ä¸€äº›ç©ºé—´';
        }

        function getCareerText(score) {
            if (score >= 90) return 'äº‹ä¸šè…¾é£ï¼Œé‡å¤§é¡¹ç›®å°†è·çªç ´';
            if (score >= 80) return 'å·¥ä½œé¡ºåˆ©ï¼Œä¸Šå¸è®¤å¯ä½ çš„èƒ½åŠ›';
            if (score >= 70) return 'æŒ‰éƒ¨å°±ç­ï¼Œç¨³æ‰ç¨³æ‰“è§æˆæ•ˆ';
            if (score >= 60) return 'é‡åˆ°æŒ‘æˆ˜ï¼Œéœ€è¦æ›´å¤šè€å¿ƒ';
            return 'èŒåœºå‹åŠ›ï¼Œæ³¨æ„è°ƒèŠ‚å¿ƒæ€';
        }

        // é‡ç½®è¡¨å•
        function resetForm() {
            document.getElementById('result-section').classList.add('hidden');
            document.getElementById('input-section').classList.remove('hidden');
            document.getElementById('birthDate').value = '';
            
            // é‡ç½®è¿›åº¦æ¡
            document.getElementById('overallBar').style.width = '0%';
            document.getElementById('loveBar').style.width = '0%';
            document.getElementById('careerBar').style.width = '0%';
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // åˆ†äº«åŠŸèƒ½
        function shareResult() {
            const modal = document.getElementById('shareModal');
            const content = document.getElementById('shareContent');
            const text = document.getElementById('shareText');
            
            const today = new Date().toLocaleDateString('zh-CN');
            const shareTemplate = `ğŸŒŸ ${today} æ˜Ÿé™…è¿åŠ¿ ğŸŒŸ\n\næˆ‘æ˜¯ã€${currentZodiac}ã€‘${zodiacData[currentZodiac].icon}\n\nä»Šæ—¥è¿åŠ¿æŒ‡æ•°ï¼š\nğŸ¯ ç»¼åˆï¼š${currentFortune.overall}%\nğŸ’• çˆ±æƒ…ï¼š${currentFortune.love}%\nğŸ’¼ äº‹ä¸šï¼š${currentFortune.career}%\n\n${document.getElementById('overallText').textContent}\n\nå¿«æ¥æµ‹æµ‹ä½ çš„è¿åŠ¿å§ï¼âœ¨`;
            
            text.textContent = shareTemplate;
            
            modal.classList.remove('hidden');
            setTimeout(() => {
                content.classList.remove('scale-95', 'opacity-0');
                content.classList.add('scale-100', 'opacity-100');
            }, 10);
        }

        function closeShareModal() {
            const modal = document.getElementById('shareModal');
            const content = document.getElementById('shareContent');
            
            content.classList.remove('scale-100', 'opacity-100');
            content.classList.add('scale-95', 'opacity-0');
            
            setTimeout(() => {
                modal.classList.add('hidden');
            }, 300);
        }

        function copyToClipboard() {
            const text = document.getElementById('shareText').textContent;
            navigator.clipboard.writeText(text).then(() => {
                const feedback = document.getElementById('copyFeedback');
                feedback.classList.remove('opacity-0');
                setTimeout(() => feedback.classList.add('opacity-0'), 2000);
            });
        }

        function shareToWeibo() {
            const text = encodeURIComponent(document.getElementById('shareText').textContent);
            window.open(`https://service.weibo.com/share/share.php?title=${text}&url=${encodeURIComponent(window.location.href)}`, '_blank');
        }

        // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
        document.getElementById('shareModal').addEventListener('click', (e) => {
            if (e.target === e.currentTarget) closeShareModal();
        });

        // åˆå§‹åŒ–
        window.onload = function() {
            initStars();
            
            // è®¾ç½®æ—¥æœŸè¾“å…¥æœ€å¤§å€¼ä¸ºä»Šå¤©
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('birthDate').setAttribute('max', today);
        };

        // å›è½¦é”®æäº¤
        document.getElementById('birthDate').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') calculateHoroscope();
        });
    </script>
</body>
</html>
